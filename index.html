<script src="https://unpkg.com/webex/umd/calling.min.js"></script>
<script>
  async function initCall() {
    const webexConfig = {
      credentials: {
        access_token: "eyJhbGciOiJSUzI1NiJ9.eyJtYWNoaW5lX3R5cGUiOiJhcHB1c2VyIiwiY2x1c3RlciI6IlBGODQiLCJwcml2YXRlIjoiZXlKamRIa2lPaUpLVjFRaUxDSmxibU1pT2lKQk1USTRRMEpETFVoVE1qVTJJaXdpWVd4bklqb2laR2x5SW4wLi5iZXhzdzFic0RENDVvRUtEYkpCajJRLlNuN09EUkhwdGVTOFgtLXNNVEFYd3pRREhQX2Y2Y1ExZnJCVS1xM0MwYU5jT1NzVngyd0o4UnlNYWJiTDNmcWZiWWFlU3pXdF9NMm5JS3Z5Y0JONUx4TjY4alktTHEzTlQ5amZZT1RndFg0aTVBelQzMW9kdUozZEdKQXRaYXhIeHpqenVJZ1c0YlMxM0dlZDFuNnhmby1UdlFxbmFleVYxNENsYUN2Z05EcVhJNVZNaDhmeXJKbjk0NTVHLUszbE1qdmRpZFZ0WXVDSkV4X0YtTmVKNGJCSzJOaGJpRWJkRVgzUmpHalFDRFFoWDNjcjNTanIwYjZYNDNrZFNkZkxONVFqaUdqd1FuUGNTMjV0MDFXVFcxSTFkYlE4cFhOeWFoX1hVM0M4SE5lYUVGZXhkRTBpdllvTHRXMF9aMjRiZDFGejJNa2s5cW9fLW5kTXNjRXBiQ3hMM2VKRF94MFRPcjc5dFpCajIwbWNFbTBibW5rWk5JVENsZGFzVVVLNVgzXzRxcFk0YmFxUU1aa0c2anNKRFMwUTNDTHFNaUxuSVh0Z2l6bk8tQTNXak1uTjk0d1lzRXVwa0piUjRFYWNhdndfN0ZBVmU0eTNNUk5ZaUo1Rm9nYkwyajFqTlFEWFJpWU11WUtyM0J6VFBxSTlZSnBlYU5YMlFsbTlSa0xtc1dnUmcyZFl0Mm9SUjk0LXpHVl9vOGlySE10WTJCN0ppaW9MY0h4ekk1b3Y1Rm0yNldQRGFuMDhwZEJYeG1Gc090RmdaSFlKcnUxM1l4UDBjbmljUnMtak1zb3NITmhQTDJELTN0c1Y2R1hrTXVTVzhJX0h1Z2xTUHNrd2xzUTV3cVNwUDVoWEpLZlJ1NV9ZSzBHWXJBZ3ZodEVjZGhRZTRpNmsyZDdHLURjLlJuU3QwSzRKSFNBdUw2dGJ4dDBraVEiLCJyZWZlcmVuY2VfaWQiOiI3ZDM2MjgwMS0wY2I3LTQ3MjAtOGE1Zi1hZWQzODM5N2M4YmIiLCJpc3MiOiJodHRwczovL2lkYnJva2VyLndlYmV4LmNvbS9pZGIiLCJ0b2tlbl90eXBlIjoiQmVhcmVyIiwiY2xpZW50X2lkIjoiQzMxMTc3MjNhMGE0Yzk4NWE4YmQ2ZGRhNzZmNzc2NmM1MTMyNGI2ZjQxYmY0ZmVmMWMyYzgyNzg0YTFmMjk3NWMiLCJ1c2VyX3R5cGUiOiJtYWNoaW5lIiwidG9rZW5faWQiOiJBYVozcjBOelJrWWpGbVpUUXROR1ZtT0MwME9UVmpMVGd5WWpjdE1EWmlOalkxTmpNeVkyRTBOVE0wWVRKbU16QXROVEkyIiwib3JnX2lkIjoiZWQ1NzNmNGMtMWRhMy00NWVjLTk0ZTctODhhZmZiYjIwYTlhIiwidXNlcl9tb2RpZnlfdGltZXN0YW1wIjoiMjAyNTA5MTkxNjM3NTAuNDE1WiIsInJlYWxtIjoiZWQ1NzNmNGMtMWRhMy00NWVjLTk0ZTctODhhZmZiYjIwYTlhIiwiY2lzX3V1aWQiOiIxZGYyMTZmNi0wZmFlLTRjODctOWI4Mi05MjRjYmU5OWQ0OTUiLCJleHBpcnlfdGltZSI6MTc1ODM2NDY2OTc3NH0.aNXv1jeXdDC-S-0MSDHB6vn9pCk8w46bj4r5AB8p2m4gRnlG2atq73hDxSxiVxLcymjmUV2NGK4KnlYGyn51Z5Gm3hXNAY9M6KVUb0c8OuzElFGtWo_4QPEZT-Do03k_EQau3FCzb8LOCDk9jRaePgh2pja9t92jByasoGYlDOCv4cC3iYLyPQ6Jx1n6izllIUR8adEOGArAp_XGud-PpYkpL2Wn4zmsc33pKMZZacXwoYZM8pkLw6OM4ZHb0TnDjg_IDKcdbmSuadUGDW8RFp3Je5pBNqbAjeFTVh_pzI-eX5GRTYEPT_f4d-Mwz6kybwuYIoCkV4iPaIEAB1brVw"
      },
      config: {
        logger: {
          level: "debug"   // ðŸ‘ˆ obligatorio, evita el error
        }
      }
    };

    const callingConfig = {
      clientConfig: { calling: true },
      logger: {
        level: "info"      // ðŸ‘ˆ obligatorio, evita el error
      }
    };

    const calling = await Calling.init({ webexConfig, callingConfig });

    calling.on("ready", async () => {
      await calling.register();

      const line = Object.values(calling.callingClient.getLines())[0];
      const localAudioStream = await Calling.createMicrophoneStream({ audio: true });

      const call = line.makeCall({
        type: "uri",
        address: "destino@ejemplo.com" // nÃºmero o URI vÃ¡lido
      });

      await call.dial(localAudioStream);

      call.on("remote_media", (track) => {
        document.getElementById("remote-audio").srcObject = new MediaStream([track]);
      });
    });
  }
</script>

<button onclick="initCall()">Llamar</button>
<audio id="remote-audio" autoplay></audio> 
