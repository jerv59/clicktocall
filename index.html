<script src="https://unpkg.com/webex/umd/webex.min.js"></script>
<script>
  async function initCall() {
    const webexConfig = {
      credentials: {
        access_token: "ZWM4YzIzMTgtOWYxZS00MzdhLTljNjctNjNkYTE2MzgwOTcxZGU1YjhkYjQtNTgz_PF84_e8a35262-0627-40d1-9b31-82b6b9af3653"
      },
      config: {
        logger: {
          level: "debug"   // ðŸ‘ˆ obligatorio, evita el error
        }
      }
    };

    const callingConfig = {
      clientConfig: { calling: true },
      logger: {
        level: "info"      // ðŸ‘ˆ obligatorio, evita el error
      }
    };

    const calling = await Calling.init({ webexConfig, callingConfig });

    calling.on("ready", async () => {
      await calling.register();

      const line = Object.values(calling.callingClient.getLines())[0];
      const localAudioStream = await Calling.createMicrophoneStream({ audio: true });

      const call = line.makeCall({
        type: "uri",
        address: "destino@ejemplo.com" // nÃºmero o URI vÃ¡lido
      });

      await call.dial(localAudioStream);

      call.on("remote_media", (track) => {
        document.getElementById("remote-audio").srcObject = new MediaStream([track]);
      });
    });
  }
</script>

<button onclick="initCall()">Llamar</button>
<audio id="remote-audio" autoplay></audio> 
